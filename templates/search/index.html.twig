{# templates/search/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Résultats de recherche pour "{{ query }}"{% endblock %}

{% block body %}
    <h1>Résultats de l'API News API pour : <em>{{ query }}</em></h1>

    {% if articles is empty %}
        <p>Aucun résultat trouvé ou une erreur est survenue lors de l'appel à l'API.</p>
    {% else %}

        {# MODIFICATION CRUCIALE : Remplacement du FLEX en colonne par une GRILLE #}
        {# La grille utilise les styles en ligne de votre template d'accueil pour la mise en page #}
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">

            {% for article in articles %}

                {# AJOUT DE LA CLASSE article-card POUR BÉNÉFICIER DES STYLES CSS (Hover, Box-Shadow, Border) #}
                <article class="article-card">

                    {# Conteneur intérieur pour le padding et la structure #}
                    <div style="padding: 15px;">

                        {# Image Cliquable - Nous n'utilisons que la balise <a> pour l'image #}
                        <a href="{{ article.url }}" target="_blank" title="{{ article.title }}" style="display: block; text-decoration: none;">
                            {% if article.image %}
                                {# Styles en ligne pour contraindre la taille de l'image #}
                                <img src="{{ article.image }}" alt="Image de l'article" style="width: 100%; height: 200px; object-fit: cover;">
                            {% else %}
                                <div style="width: 100%; height: 200px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #666;">
                                    <span>Image non disponible</span>
                                </div>
                            {% endif %}
                        </a>

                        {# Titre #}
                        <h2 style="font-size: 1.2em; margin-top: 10px; margin-bottom: 10px;">
                            {# Le lien de titre #}
                            <a href="{{ article.url }}" target="_blank" style="text-decoration: none; color: #007bff;">
                                {{ article.title }}
                            </a>
                        </h2>

                        {# Description #}
                        <p style="font-size: 0.9em; color: #555; margin-bottom: 15px;">
                            {{ article.description|slice(0, 100) ~ '...' }}
                        </p>

                        {# Source et Date #}
                        <small style="display: block; color: #888;">
                            Source: **{{ article.source.name }}** - Publié le: {{ article.publishedAt|date('d/m/Y H:i') }}
                        </small>

                        <p style="margin-top: 10px;">
                            <a href="{{ article.url }}" target="_blank">Lire l'article complet →</a>
                        </p>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
